<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.5.x plugin-docs plugin-id-default docs-doc-id-basics">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Basics Tutorial | ZIO gRPC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://scalapb.github.io/zio-grpc/img/zio-grpc-social-light.png"><meta data-rh="true" name="twitter:image" content="https://scalapb.github.io/zio-grpc/img/zio-grpc-social-light.png"><meta data-rh="true" property="og:url" content="https://scalapb.github.io/zio-grpc/docs/0.5.x/basics"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.5.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.5.x"><meta data-rh="true" name="docsearch:version" content="0.5.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.5.x"><meta data-rh="true" property="og:title" content="Basics Tutorial | ZIO gRPC"><meta data-rh="true" name="description" content="A basic tutorial introduction to ZIO gRPC"><meta data-rh="true" property="og:description" content="A basic tutorial introduction to ZIO gRPC"><link data-rh="true" rel="icon" href="/zio-grpc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://scalapb.github.io/zio-grpc/docs/0.5.x/basics"><link data-rh="true" rel="alternate" href="https://scalapb.github.io/zio-grpc/docs/0.5.x/basics" hreflang="en"><link data-rh="true" rel="alternate" href="https://scalapb.github.io/zio-grpc/docs/0.5.x/basics" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-346180-20","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/zio-grpc/assets/css/styles.4ea28554.css">
<link rel="preload" href="/zio-grpc/assets/js/runtime~main.30a0ba41.js" as="script">
<link rel="preload" href="/zio-grpc/assets/js/main.66e576a0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zio-grpc/"><div class="navbar__logo"><img src="/zio-grpc/img/zio-grpc-hero.png" alt="ZIO gRPC" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zio-grpc/img/zio-grpc-hero.png" alt="ZIO gRPC" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"> </b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zio-grpc/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/zio-grpc/docs/0.5.x/">0.5.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zio-grpc/docs/basics">0.6.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zio-grpc/docs/0.5.x/basics">0.5.x</a></li></ul></div><a href="https://github.com/scalapb/zio-grpc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/quickstart">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zio-grpc/docs/0.5.x/basics">Basics Tutorial</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/installation">Installing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/generated-code">Generated code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/context">Context and Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/decorating">Decorating services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/deadlines">ZIO gRPC and Deadlines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/scala.js">Scala.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-grpc/docs/0.5.x/backpressure">Backpressure</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->ZIO gRPC<!-- --> <b>0.5.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/zio-grpc/docs/basics">latest version</a></b> (<!-- -->0.6.x<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/zio-grpc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Basics Tutorial</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.5.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Basics Tutorial</h1></header><p>This tutorial provides a basic introduction to Scala programmers to working with ZIO gRPC.</p><p>By walking through this example you&#x27;ll learn how to:</p><ul><li>Define a service in a .proto file.</li><li>Generate server and client code using ZIO gRPC code generator.</li><li>Use ZIO gRPC API to write a simple client and server for your service.</li></ul><p>It assumes that you have read the <a href="https://grpc.io/docs/what-is-grpc/introduction/" target="_blank" rel="noopener noreferrer">Introduction to
gRPC</a> and are familiar with
<a href="https://developers.google.com/protocol-buffers/docs/overview" target="_blank" rel="noopener noreferrer">protocol buffers</a>. Note
that the example in this tutorial uses the
proto3 version of the protocol buffers language: you can find out more in the <a href="https://developers.google.com/protocol-buffers/docs/proto3" target="_blank" rel="noopener noreferrer">proto3 language
guide</a> and <a href="https://scalapb.github.io/generated-code.html" target="_blank" rel="noopener noreferrer">ScalaPB
generated code
guide</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-use-grpc">Why use gRPC?<a class="hash-link" href="#why-use-grpc" title="Direct link to heading">​</a></h2><p>Our example is a simple route mapping application that lets clients get information about features on their route, create a summary of their route, and exchange route information such as traffic updates with the server and other clients.</p><p>With gRPC we can define our service once in a <code>.proto</code> file and generate clients and servers in any of gRPC’s supported languages, which in turn can be run in environments ranging from servers inside a large data center to your own tablet — all the complexity of communication between different languages and environments is handled for you by gRPC. We also get all the advantages of working with protocol buffers, including efficient serialization, a simple IDL, and easy interface updating.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-code-and-setup">Example code and setup<a class="hash-link" href="#example-code-and-setup" title="Direct link to heading">​</a></h2><p>The example code for our tutorial is in
<a href="https://github.com/scalapb/zio-grpc/tree/master/examples/routeguide/src/main/scala/zio_grpc/examples/routeguide" target="_blank" rel="noopener noreferrer">scalapb/zio-grpc/examples/routeguide/src/main/scala/zio_grpc/examples/routeguide</a>.
To download the example, clone the latest release in <code>zio-grpc</code> repository by
running the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">git</span><span class="token plain"> clone -b v0.5.0 https://github.com/scalapb/zio-grpc.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then change your current directory to <code>zio-grpc/examples</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> zio-grpc/examples/routeguide</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="defining-the-service">Defining the service<a class="hash-link" href="#defining-the-service" title="Direct link to heading">​</a></h2><p>Our first step (as you&#x27;ll know from the <a href="https://grpc.io/docs/what-is-grpc/introduction/" target="_blank" rel="noopener noreferrer">Introduction to gRPC</a>) is to
define the gRPC <em>service</em> and the method <em>request</em> and <em>response</em> types using
<a href="https://developers.google.com/protocol-buffers/docs/overview" target="_blank" rel="noopener noreferrer">protocol buffers</a>. You can see the complete .proto file in
<a href="https://github.com/scalapb/zio-grpc/blob/master/examples/src/main/protobuf/route_guide.proto" target="_blank" rel="noopener noreferrer">scalapb/zio-grpc/examples/src/main/protobuf/route_guide.proto</a>.</p><p>ZIO gRPC generates code into the same Scala package that ScalaPB uses. Since <code>java_package</code> is
specified, the Scala package will be the <code>java_package</code> with the proto file name appended to it. In
this case, the package name would be <code>io.grpc.examples.routeguide.route_guide</code>.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">option</span><span class="token plain"> java_package </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;io.grpc.examples.routeguide&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can read more on how ScalaPB determines the Scala package name and how can this be customized
in <a href="https://scalapb.github.io/generated-code.html#default-package-structure" target="_blank" rel="noopener noreferrer">ScalaPB&#x27;s documentation</a>.</p><p>To define a service, we specify a named <code>service</code> in the .proto file:</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">service</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RouteGuide</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then we define <code>rpc</code> methods inside our service definition, specifying their
request and response types. gRPC lets you define four kinds of service methods,
all of which are used in the <code>RouteGuide</code> service:</p><ul><li><p>A <em>simple RPC</em> where the client sends a request to the server and waits for a response to come back.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Obtains the feature at a given position.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">rpc</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">GetFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>A <em>server-side streaming RPC</em> where the client sends a request to the server
and gets a stream to read a sequence of messages back. The client reads from
the returned stream until there are no more messages. As you can see in our
example, you specify a server-side streaming method by placing the <code>stream</code>
keyword before the <em>response</em> type.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Obtains the Features available within the given Rectangle.  Results are</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// streamed rather than returned at once (e.g. in a response message with a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// repeated field), as the rectangle may cover a large area and contain a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// huge number of features.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">rpc</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">ListFeatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Rectangle</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">stream</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>A <em>client-side streaming RPC</em> where the client sends a stream of messages
to the server. Once the client has finished writing the messages,
it waits for the server to read them all and return its response.
You specify a client-side streaming method by placing the <code>stream</code> keyword
before the <em>request</em> type.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Accepts a stream of Points on a route being traversed, returning a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// RouteSummary when traversal is completed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">rpc</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">RecordRoute</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">stream</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">RouteSummary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>A <em>bidirectional streaming RPC</em> where both sides send a sequence of
messages. The two streams operate independently, so clients and servers can
read and write in whatever order they like: for example, the server could
wait to receive all the client messages before writing its responses, or it
could alternately read a message then write a message, or some other
combination of reads and writes. The order of messages in each stream is
preserved. You specify this type of method by placing the <code>stream</code> keyword
before both the request and the response.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Accepts a stream of RouteNotes sent while a route is being traversed,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// while receiving other RouteNotes (e.g. from other users).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">rpc</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">RouteChat</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">stream</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">stream</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>Our <code>.proto</code> file also contains protocol buffer message type definitions for all
the request and response types used in our service methods - for example, here&#x27;s
the <code>Point</code> message type:</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Points are represented as latitude-longitude pairs in the E7 representation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// (degrees multiplied by 10**7 and rounded to the nearest integer).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Latitudes should be in the range +/- 90 degrees and longitude should be in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// the range +/- 180 degrees (inclusive).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">message</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Point</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token builtin" style="color:rgb(72, 118, 214)">int32</span><span class="token plain"> latitude </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token builtin" style="color:rgb(72, 118, 214)">int32</span><span class="token plain"> longitude </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="generating-client-and-server-code">Generating client and server code<a class="hash-link" href="#generating-client-and-server-code" title="Direct link to heading">​</a></h2><p>When you compile the application in SBT (using <code>compile</code>), an SBT plugin named
<code>sbt-protoc</code> invokes two code generators. The first code generator is ScalaPB
which generates case classes for all messages and some gRPC-related code that
ZIO-gRPC interfaces with. The second generator is ZIO gRPC code generator, which
generates a ZIO interface to your service.</p><p>The following classes are generated from our service definition in <code>target/scala_2.13/src_managed</code>:</p><ul><li><code>Feature.scala</code>, <code>Point.scala</code>, <code>Rectangle.scala</code>, and others which contain all
the protocol buffer code to populate, serialize, and retrieve our request and
response message types.</li><li><code>ZioRouteGuide.scala</code> which contains (along with some other useful code):<ul><li>a base trait for <code>RouteGuide</code> servers to implement,
<code>ZioRouteGuide.ZRouteGuide</code>, with all the methods definitions in the
<code>RouteGuide</code> service.</li><li><code>ZioRouteGuide.RouteGuideClient</code>, contains ZIO accessor methods that clients can
use to talk to a <code>RouteGuide</code> server.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-server">Creating the server<a class="hash-link" href="#creating-the-server" title="Direct link to heading">​</a></h2><p>First let&#x27;s look at how we create a <code>RouteGuide</code> server. If you&#x27;re only
interested in creating gRPC clients, you can skip this section and go straight
to <a href="#creating-the-client">Creating the client</a> (though you might find it interesting
anyway!).</p><p>There are two parts to making our <code>RouteGuide</code> service do its job:</p><ul><li>Implementing the trait <code>ZRouteGuide</code> generated from our service definition: returning the
ZIO effects that do the actual &quot;work&quot; of our service.</li><li>Putting an instance of ZRouteGuide behind a gRPC server to listen for requests from
clients and return the service responses.</li></ul><p>You can find our example <code>RouteGuide</code> server in
<a href="https://github.com/scalapb/zio-grpc/blob/master/examples/src/main/scala/zio_grpc/examples/routeguide/RouteGuideServer.scala" target="_blank" rel="noopener noreferrer">scalapb/zio-grpc/examples/src/main/scala/zio_grpc/examples/routeguide/RouteGuideServer.scala</a>.
Let&#x27;s take a closer look at how it works.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-zrouteguide">Implementing ZRouteGuide<a class="hash-link" href="#implementing-zrouteguide" title="Direct link to heading">​</a></h3><p>As you can see, our server has a <code>RouteGuideService</code> class that extends the
generated <code>ZioRouteGuide.ZRouteGuide</code> base trait:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> RouteGuideService</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    features</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Seq</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    routeNotesRef</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Ref</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">extends</span><span class="token plain"> ZioRouteGuide</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ZRouteGuide</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">ZEnv</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">Any</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The trait <code>ZRouteGuide[R, Context]</code> takes two type parameters:</p><ul><li><code>R</code> represents the environment. These can be dependencies that the server needs in order to do its job. In our example <code>R</code> is <code>ZEnv</code> which is ZIO&#x27;s default environment which contains basic services such as <code>Clock</code> and <code>Console</code>.</li><li><code>Context</code> represents data that is unique to each request, for example, Metadata headers, or the identity of the user making the request. We will learn about <code>Context</code> in a future example.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-rpc">Simple RPC<a class="hash-link" href="#simple-rpc" title="Direct link to heading">​</a></h3><p><code>RouteGuideService</code> implements all our service methods. Let&#x27;s
look at the simplest method first, <code>GetFeature()</code>, which just gets a <code>Point</code> from
the client and returns the corresponding feature information from its database
in a <code>Feature</code>.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> getFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">ZEnv</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ZIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">fromOption</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">findFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">mapError</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">_ </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">NOT_FOUND</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> findFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">point</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Option</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  features</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">find</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">f </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLocation </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> point </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;&amp;</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">nonEmpty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>getFeature()</code> method takes the request (of type <code>Point</code>), and returns a ZIO
effect that represents the work of computing the response. The value that is returned represents
a suspended effect: nothing actually happens until ZIO runtime
ultimately runs the effect. The type of the effect is <code>ZIO[ZEnv, Status, Feature]</code> which means
it is a computation:</p><ul><li>can fail with value of type <code>Status</code> (this type comes from grpc-java and represents a gRPC status code).</li><li>can succeed with value of type <code>Feature</code>.</li><li>requires an environment of type <code>ZEnv</code> to run.</li></ul><p>In this case, our effect is built on top of a pure function <code>findFeature</code> that returns <code>Some(feature)</code>
if there is a feature in the database that corresponds to the given point, or <code>None</code> otherwise.</p><p>We use <code>ZIO.fromOption</code> to turn the <code>Option[Feature]</code> into an effect of type <code>IO[Option[Nothing], Feature]</code>
which means that it can either succeed with a value of type <code>Feature</code> or fail with a value of type <code>Option[Nothing]</code> (the only possible value of this type is <code>None</code> since there are no instances of type <code>Nothing</code>). We
then use <code>mapError</code> to map the case of an error to gRPC&#x27;s <code>NOT_FOUND</code> status.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-side-streaming-rpc">Server-side streaming RPC<a class="hash-link" href="#server-side-streaming-rpc" title="Direct link to heading">​</a></h3><p>Next let&#x27;s look at one of our streaming RPCs. <code>ListFeatures</code> is a server-side
streaming RPC, so we need to send back multiple <code>Feature</code>s to our client.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> listFeatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Rectangle</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">ZEnv</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> left </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">longitude min request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getHi</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">longitude</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> right </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">longitude max request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getHi</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">longitude</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> top </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">latitude max request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getHi</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">latitude</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> bottom </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">latitude min request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getHi</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">latitude</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">fromIterable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    features</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">filter </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> feature </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> lat </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLocation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">latitude</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> lon </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLocation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">longitude</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      lon </span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;=</span><span class="token plain"> left </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;&amp;</span><span class="token plain"> lon </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;=</span><span class="token plain"> right </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;&amp;</span><span class="token plain"> lat </span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;=</span><span class="token plain"> bottom </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;&amp;</span><span class="token plain"> lat </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;=</span><span class="token plain"> top</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Like the simple RPC, this method gets a request object (the <code>Rectangle</code> in which
our client wants to find <code>Feature</code>s) and returns a <code>ZStream[ZEnv, Status, Feature]</code>, which represents an effectful stream that can produce, provided an environment of type
<code>ZEnv</code> zero or more elements of type <code>Feature</code> and fail with a value of type of <code>Status</code>.</p><p> This time, the stream does not need the environment and can not ever fail (since
our database is a constant in the same process!)</p><p> We build the stream from a Scala collection we build by filtering through the features
sequence. ZIO gRPC takes over streaming the response to the client when the stream
gets executed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-side-streaming-rpc">Client-side streaming RPC<a class="hash-link" href="#client-side-streaming-rpc" title="Direct link to heading">​</a></h3><p>Now let&#x27;s look at something a little more complicated: the client-side streaming
method <code>RecordRoute()</code>, where we get a stream of <code>Point</code>s from the client and
return a single <code>RouteSummary</code> with information about their trip once the stream finishes.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> recordRoute</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    request</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> zio</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Stream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Clock</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteSummary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Zips each element with the previous element, initially accompanied by None.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">zipWithPrevious</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">fold</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">RouteSummary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">maybePrevPoint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> currentPoint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Compute the next status based on the current status.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">copy</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          pointCount </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">pointCount </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          featureCount </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">featureCount </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">findFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">currentPoint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">isDefined</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                                    </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          distance </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">distance </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> maybePrevPoint</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">calcDistance</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">_</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> currentPoint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getOrElse</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">timed </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// returns a new effect that times the execution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">duration</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        summary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">copy</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">elapsedTime </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">duration</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">toMillis </span><span class="token operator" style="color:rgb(12, 150, 155)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">toInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, our method gets a stream that is produced by the client. As you can see
from the signature of this method, our goal would be to turn this stream into an
effect that results in a <code>RouteSummary</code>.</p><p><code>RouteSummary</code> contains the number of points, number of features on the trip, total distance passed, and the time it took. As this summary can be built iteratively we use fold, which takes the summary and new input to compute the next summary. Since we are
adding up the distance between successive pair of points, we will use <code>zipWithPrevious</code>
that gives us a pair <code>(Option[Point], Point)</code> where the left element represents the previous element in the stream (which is initially None).</p><p>The <code>fold</code> method gives us a <code>IO[Status, RouteSummary]</code>. Using the <code>timed</code> method we are getting a new ZIO effect that upon success gives us the a tuple <code>(zio.duration.Duration, RouteSummary)</code> where the duration represents the time it took to process
the effect thus far. We then use <code>map</code> to turn it back to a <code>RouteSummary</code> that contains the elapsed time in seconds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bidirectional-streaming-rpc">Bidirectional streaming RPC<a class="hash-link" href="#bidirectional-streaming-rpc" title="Direct link to heading">​</a></h3><p>Finally, let&#x27;s look at our bidirectional streaming RPC <code>RouteChat()</code>.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> routeChat</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    request</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> zio</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Stream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">ZEnv</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">flatMap </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> note </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// By using flatMap, we can map each RouteNote we receive to a stream with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// the existing RouteNotes for that location, and those sub-streams are going</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// to get concatenated.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// We start from an effect that updates the map with the new RouteNote,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// and returns the notes associated with the location just before the update.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> updateMapEffect</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> UIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      routeNotesRef</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">modify </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> routeNotes </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> messages </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> routeNotes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getOrElse</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">note</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLocation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Nil</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">messages</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> routeNotes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">updated</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">note</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLocation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> note </span><span class="token operator" style="color:rgb(12, 150, 155)">::</span><span class="token plain"> messages</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// We create a stream from the effect.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">fromIterableM</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">updateMapEffect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As with our client-side streaming example, we are getting a <code>Stream</code> of
<code>RouteNote</code>s, except this time we are also returning a stream of
<code>RouteNote</code>s. Although each side will always get the other&#x27;s messages in the
order they were written, both the client and server can read and write in any
order — the streams operate completely independently.</p><p>In this example, we are using <code>flatMap</code> on the incoming stream to map each input to a new
effectful stream representing the notes that are available in that location. We are using <code>Ref#modify</code> to mutate the collection of notes in the given location and return the list of notes available just prior to the update.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="starting-the-server">Starting the server<a class="hash-link" href="#starting-the-server" title="Direct link to heading">​</a></h2><p>Once we&#x27;ve implemented all our methods, we also need to start up a gRPC server
so that clients can actually use our service. The following snippet shows how we
do this for our <code>RouteGuide</code> service:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">object</span><span class="token plain"> RouteGuideServer </span><span class="token keyword" style="color:rgb(12, 150, 155)">extends</span><span class="token plain"> ServerMain </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> port</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">Int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">8980</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> featuresDatabase </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> JsonFormat</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">fromJsonString</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">FeatureDatabase</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    Source</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">fromResource</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;route_guide_db.json&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">mkString</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> createRouteGuide </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    routeNotes </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> Ref</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">make</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">empty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">yield</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">new</span><span class="token plain"> RouteGuideService</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">featuresDatabase</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> routeNotes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> services</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ServiceList</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">zio</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ZEnv</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    ServiceList</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">addM</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">createRouteGuide</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ZIO gRPC provides a base trait to quickly set up gRPC services with zero boilerplate.</p><ol><li>We override the port we are going to use (default is 9000)</li><li>Create an effect that constructs an instance of our service (we need an effectful construction since
our service constructor takes a <code>zio.Ref</code>)</li><li>Override <code>def services</code> to return a <code>ServiceList</code> that contains our service.</li></ol><p><code>ServerMain</code> is meant to be used for simple applications. If you need to do more in your initialization, you can take a look at the source code of <code>ServerMain</code> and customize.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-client">Creating the client<a class="hash-link" href="#creating-the-client" title="Direct link to heading">​</a></h2><p>In this section, we&#x27;ll look at creating a client for our <code>RouteGuide</code>
service. You can see our complete example client code in
<a href="https://github.com/scalapb/zio-grpc/blob/master/examples/src/main/scala/zio_grpc/examples/routeguide/RouteGuideClientApp.scala" target="_blank" rel="noopener noreferrer">RouteGuideClientApp.scala</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instantiating-a-client">Instantiating a client<a class="hash-link" href="#instantiating-a-client" title="Direct link to heading">​</a></h3><p>To call service methods, we first need to create a client. There are two patterns
to work with clients:</p><ul><li>Use <code>RouteGuideClient.managed</code> to instantiate a client inside a <code>zio.ZManaged</code>. Then through calling its <code>use</code> method, the client can be accessed and method can be called on it.</li><li>Use <code>RouteGuideClient.live</code> to create a <code>ZLayer</code> that can be used to provide a client as a singleton to our program through the environment. In that case, throughout the program we use accessor methods, defined statically in <code>RouteGuideClient</code> that expect the client to be available in the environment.</li></ul><p>Throughout this tutorial, we will follow the second pattern. We create a <code>Layer</code> that can provide a <code>RouteGuideClient</code> like this:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> clientLayer</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Layer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Throwable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteGuideClient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  RouteGuideClient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">live</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    ZManagedChannel</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      ManagedChannelBuilder</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">forAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;localhost&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">8980</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">usePlaintext</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="calling-service-methods">Calling service methods<a class="hash-link" href="#calling-service-methods" title="Direct link to heading">​</a></h3><p>Now let&#x27;s look at how we call our service methods.</p><p>As described above, <code>RouteGuideClient</code> contains accessor methods for each RPC
that return an effect or a stream that needs a client in the environment to be ran:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> getFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">req</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ZIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteGuideClient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> listFeatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">req</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> Rectangle</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteGuideClient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> recordRoute</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">R0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">req</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">R0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ZIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteGuideClient </span><span class="token keyword" style="color:rgb(12, 150, 155)">with</span><span class="token plain"> R0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteSummary</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> routeChat</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">R0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">req</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">R0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteGuideClient </span><span class="token keyword" style="color:rgb(12, 150, 155)">with</span><span class="token plain"> R0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-rpc-1">Simple RPC<a class="hash-link" href="#simple-rpc-1" title="Direct link to heading">​</a></h3><p>Calling the simple RPC <code>GetFeature</code> on the static accessor stub is as
straightforward as instantiating a local effect:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> getFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    lat</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">Int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    lng</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> ZIO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">RouteGuideClient </span><span class="token keyword" style="color:rgb(12, 150, 155)">with</span><span class="token plain"> Console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">Unit</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    f </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> RouteGuideClient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">lat</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> lng</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;&quot;&quot;Found feature called &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">f</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;.&quot;&quot;&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">catchSome </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">case</span><span class="token plain"> status </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> status </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> Status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">NOT_FOUND </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Feature not found: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">status</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">toString</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We create and populate a request protocol buffer object (in our case
<code>Point</code>), pass it to the <code>getFeature()</code> method on our accessor, and get
back an effect that needs a <code>RouteGuideClient</code> environment. We chain
the response with a call to <code>putStrLn</code> to print the result on the console,
and we catch the <code>NOT_FOUND</code> response and print an error. All other errors
are not handled at this level and will &quot;bubble up&quot; up to the program&#x27;s <code>exitCode</code> handler.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-side-streaming-rpc-1">Server-side streaming RPC<a class="hash-link" href="#server-side-streaming-rpc-1" title="Direct link to heading">​</a></h3><p>Next, let&#x27;s look at a server-side streaming call to <code>ListFeatures</code>, which
returns a stream of geographical <code>Feature</code>s:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">_ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  RouteGuideClient</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">listFeatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      Rectangle</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        lo </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">400000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token number" style="color:rgb(170, 9, 130)">750000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        hi </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">420000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token number" style="color:rgb(170, 9, 130)">730000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">zipWithIndex</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">foreach </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Result #</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">index </span><span class="token string-interpolation interpolation expression operator" style="color:rgb(12, 150, 155)">+</span><span class="token string-interpolation interpolation expression"> </span><span class="token string-interpolation interpolation expression number" style="color:rgb(170, 9, 130)">1</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">$</span><span class="token string-interpolation interpolation expression">feature</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now <code>listFeatures</code> returns a <code>ZStream</code>. We use <code>zipWithIndex</code> to get a stream
where each of the original elements are accompanied with a zero-based index. We turn
this stream into a single effect that processes the entire stream by calling <code>foreach</code>
and providing it with a function that maps each element into an effect. In this case,
the effect prints the feature.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-side-streaming-rpc-1">Client-side streaming RPC<a class="hash-link" href="#client-side-streaming-rpc-1" title="Direct link to heading">​</a></h3><p>Now for something a little more complicated: the client-side streaming method
<code>RecordRoute</code>, where we send a stream of <code>Point</code>s to the server and get back
a single <code>RouteSummary</code>.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> recordRoute</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">numPoints</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">Int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    summary </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> RouteGuideClient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">recordRoute</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      ZStream</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">repeatEffect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          nextIntBetween</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> features</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">features</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">_</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">getLocation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">tap</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">p </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Visiting (</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">p</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">latitude</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">, </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">p</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">longitude</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">)&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">schedule</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Schedule</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">spaced</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">300.</span><span class="token plain">millis</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">numPoints</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Finished trip with </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">summary</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">pointCount</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> points. &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Passed </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">summary</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">featureCount</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> features. &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Travelled </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">summary</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">distance</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> meters. &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;It took </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">summary</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">elapsedTime</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> seconds.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, we pass into <code>recordRoute</code> an effectful stream that randomly picks an element from the <code>features</code> collection (a constant), and insert random delay between elements.</p><p>Like all the other accessor methods it&#x27;s worth noting that no side effect happens upon calling  <code>recordRoute</code>. The method returns immediately giving us an effect that represents sending this stream to the server. When the effect ultimately run it can succeed with a value of type <code>RouteSummary</code> once the entire stream has been sent to the server.</p><p>In this example, we chain to this effect an effect to print the summary to the console.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bidirectional-streaming-rpc-1">Bidirectional streaming RPC<a class="hash-link" href="#bidirectional-streaming-rpc-1" title="Direct link to heading">​</a></h3><p>Finally, let&#x27;s look at our bidirectional streaming RPC <code>RouteChat()</code>.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> routeChat </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    res </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      RouteGuideClient</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">routeChat</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          ZStream</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              location </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              message </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;First message&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              location </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token plain">_000_000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              message </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Second Message&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              location </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token plain">_000_000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              message </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Third Message&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            RouteNote</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              location </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token plain">_000_000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token plain">_000_000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              message </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Four Message&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">tap </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> note </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">              </span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;&quot;&quot;Sending message &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">note</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">message</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot; at </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">note</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">getLocation</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">latitude</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">, </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">note</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">getLocation</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">longitude</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">foreach </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> note </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;&quot;&quot;Got message &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">note</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">message</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot; at </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">note</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">getLocation</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">latitude</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">, </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">note</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">getLocation</span><span class="token string-interpolation interpolation expression punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation expression">longitude</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this method, we both get and return a <code>Stream</code> of
RouteNotes. Here both streams execute independently at the same time. Although each side will always
get the other&#x27;s messages in the order they were written, both the client and
server can read and write in any order — the streams operate completely
independently.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="providing-the-client-layer-into-the-application-logic">Providing the client layer into the application logic<a class="hash-link" href="#providing-the-client-layer-into-the-application-logic" title="Direct link to heading">​</a></h3><p>All the effects we created were dependent on a <code>RouteGuideClient</code> available in the environment. We earlier instantiated a <code>clientLayer</code>, so we can provide it to our application logic at the top-level (the <code>run</code> method):</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> myAppLogic </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Looking for a valid feature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> getFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">409146138</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token number" style="color:rgb(170, 9, 130)">746188906</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Looking for a missing feature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> getFeature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Calls listFeatures with a rectangle of interest. Prints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// each response feature as it arrives.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// start: listFeatures</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      RouteGuideClient</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">listFeatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          Rectangle</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            lo </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">400000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token number" style="color:rgb(170, 9, 130)">750000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            hi </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Point</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">420000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token number" style="color:rgb(170, 9, 130)">730000000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">zipWithIndex</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">foreach </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token keyword" style="color:rgb(12, 150, 155)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">feature</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            putStrLn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation id function" style="color:rgb(153, 76, 195);font-style:italic">s</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;Result #</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token string-interpolation interpolation expression">index </span><span class="token string-interpolation interpolation expression operator" style="color:rgb(12, 150, 155)">+</span><span class="token string-interpolation interpolation expression"> </span><span class="token string-interpolation interpolation expression number" style="color:rgb(170, 9, 130)">1</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">$</span><span class="token string-interpolation interpolation expression">feature</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// end: listFeatures</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> recordRoute</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    _ </span><span class="token keyword" style="color:rgb(12, 150, 155)">&lt;-</span><span class="token plain"> routeChat</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">final</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> run</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">args</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token builtin" style="color:rgb(72, 118, 214)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  myAppLogic</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">provideCustomLayer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">clientLayer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">exitCode</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="try-it-out">Try it out!<a class="hash-link" href="#try-it-out" title="Direct link to heading">​</a></h2><ol><li><p>Run the server:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">sbt </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;runMain zio_grpc.examples.routeguide.RouteGuideServer&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>From another terminal, run the client:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">sbt </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;runMain zio_grpc.examples.routeguide.RouteGuideClientApp&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This document, &quot;ZIO gRPC: Basics Tutorial&quot;, is a derivative of <a href="https://grpc.io/docs/languages/java/basics/" target="_blank" rel="noopener noreferrer">&quot;gRPC <!-- -->–<!-- --> Basics Tutorial&quot;</a> by <a href="https://grpc.io/" target="_blank" rel="noopener noreferrer">gRPC Authors</a>, used under <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="noopener noreferrer">CC-BY-4.0</a>. &quot;ZIO gRPC: Basics Tutorial&quot; is licensed under <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="noopener noreferrer">CC-BY-4.0</a> by Nadav Samet.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/scalapb/zio-grpc/edit/master/docs/basics.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/zio-grpc/docs/0.5.x/quickstart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quick Start</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zio-grpc/docs/0.5.x/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-use-grpc" class="table-of-contents__link toc-highlight">Why use gRPC?</a></li><li><a href="#example-code-and-setup" class="table-of-contents__link toc-highlight">Example code and setup</a></li><li><a href="#defining-the-service" class="table-of-contents__link toc-highlight">Defining the service</a></li><li><a href="#generating-client-and-server-code" class="table-of-contents__link toc-highlight">Generating client and server code</a></li><li><a href="#creating-the-server" class="table-of-contents__link toc-highlight">Creating the server</a><ul><li><a href="#implementing-zrouteguide" class="table-of-contents__link toc-highlight">Implementing ZRouteGuide</a></li><li><a href="#simple-rpc" class="table-of-contents__link toc-highlight">Simple RPC</a></li><li><a href="#server-side-streaming-rpc" class="table-of-contents__link toc-highlight">Server-side streaming RPC</a></li><li><a href="#client-side-streaming-rpc" class="table-of-contents__link toc-highlight">Client-side streaming RPC</a></li><li><a href="#bidirectional-streaming-rpc" class="table-of-contents__link toc-highlight">Bidirectional streaming RPC</a></li></ul></li><li><a href="#starting-the-server" class="table-of-contents__link toc-highlight">Starting the server</a></li><li><a href="#creating-the-client" class="table-of-contents__link toc-highlight">Creating the client</a><ul><li><a href="#instantiating-a-client" class="table-of-contents__link toc-highlight">Instantiating a client</a></li><li><a href="#calling-service-methods" class="table-of-contents__link toc-highlight">Calling service methods</a></li><li><a href="#simple-rpc-1" class="table-of-contents__link toc-highlight">Simple RPC</a></li><li><a href="#server-side-streaming-rpc-1" class="table-of-contents__link toc-highlight">Server-side streaming RPC</a></li><li><a href="#client-side-streaming-rpc-1" class="table-of-contents__link toc-highlight">Client-side streaming RPC</a></li><li><a href="#bidirectional-streaming-rpc-1" class="table-of-contents__link toc-highlight">Bidirectional streaming RPC</a></li><li><a href="#providing-the-client-layer-into-the-application-logic" class="table-of-contents__link toc-highlight">Providing the client layer into the application logic</a></li></ul></li><li><a href="#try-it-out" class="table-of-contents__link toc-highlight">Try it out!</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zio-grpc/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/zio-grpc/docs/installation">Installation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/ScalaPB/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/scalapb/zio-grpc" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 <a href="https://www.linkedin.com/in/nadav-samet/">Nadav Samet</a></div></div></div></footer></div>
<script src="/zio-grpc/assets/js/runtime~main.30a0ba41.js"></script>
<script src="/zio-grpc/assets/js/main.66e576a0.js"></script>
</body>
</html>